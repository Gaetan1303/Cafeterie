import{_ as p,c as o,a as r,b as u,F as i,r as l,o as a,h,t as n}from"./index-CkUboUl1.js";const k={name:"DashboardView",data(){return{purchases:[],stock:[]}},methods:{async fetchPurchases(){try{const s=localStorage.getItem("token"),t=await fetch("/purchases/me?limit=5",{headers:{Authorization:s?`Bearer ${s}`:""}});t.ok&&(this.purchases=await t.json())}catch{}},async fetchStock(){try{const s=localStorage.getItem("token"),t=await fetch("/stock",{headers:{Authorization:s?`Bearer ${s}`:""}});t.ok&&(this.stock=await t.json())}catch{}},formatDate(s){return s?new Date(s).toLocaleString():"-"}},mounted(){this.fetchPurchases(),this.fetchStock()}},y={class:"dashboard-container"},_={class:"dashboard-section"},f={key:0},b={key:0},g={class:"dashboard-section"},m={key:0},w={key:0};function D(s,t,S,x,c,d){return a(),o("div",y,[t[2]||(t[2]=r("h2",null,"Dashboard",-1)),r("div",_,[t[0]||(t[0]=r("h3",null,"Mes derniers achats",-1)),r("ul",null,[(a(!0),o(i,null,l(c.purchases,e=>(a(),o("li",{key:e.id},[h(n(d.formatDate(e.timestamp))+" : "+n(e.type)+" ",1),e.subtype?(a(),o("span",f,"("+n(e.subtype)+")",1)):u("",!0),h(" x"+n(e.quantity),1)]))),128))]),c.purchases.length===0?(a(),o("p",b,"Aucun achat rÃ©cent.")):u("",!0)]),r("div",g,[t[1]||(t[1]=r("h3",null,"Stock actuel",-1)),r("ul",null,[(a(!0),o(i,null,l(c.stock,e=>(a(),o("li",{key:e.id},[h(n(e.type)+" ",1),e.subtype?(a(),o("span",m,"("+n(e.subtype)+")",1)):u("",!0),h(" : "+n(e.quantity),1)]))),128))]),c.stock.length===0?(a(),o("p",w,"Aucun stock disponible.")):u("",!0)])])}const V=p(k,[["render",D],["__scopeId","data-v-6c06a42a"]]);export{V as default};
